(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{566:function(t,e,r){"use strict";r.r(e);var n=r(25),o=(r(98),r(24),r(55),r(56),r(486),r(293),{data:function(){return{form:{},firstDateMenu:!1,lastDateMenu:!1,image:null,date:"",book:null,prefectures:["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県","海外"],selectPref:[]}},computed:{userId:function(){return this.$store.getters.user.id},url:function(){return null===this.image?"":URL.createObjectURL(this.image)},canSubmit:function(){if(!this.form.title||this.form.title.length>25||this.form.exp.length>200||!this.form.firstDate||this.form.selectPref===[])return!0}},mounted:function(){this.book=this.$fb.firestore().collection("users").doc(this.userId).collection("books").doc(this.$route.params.bookId),this.getForm()},methods:{getForm:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.book.get().then((function(e){e.exists&&(t.form=e.data())}));case 2:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.form.title||t.form.title.length>25||t.form.exp.length>200)&&t.form.firstDate&&t.form.selectPref){e.next=2;break}return e.abrupt("return");case 2:return t.form.update=t.$fb.firestore.FieldValue.serverTimestamp(),e.next=5,t.book.update({title:t.form.title,photo:t.url,firstDate:t.form.firstDate,lastDate:t.form.lastDate,exp:t.form.exp,update:t.form.update});case 5:t.$router.push("/mypage/".concat(t.$route.params.bookId));case 6:case"end":return e.stop()}}),e)})))()}}}),l=r(30),c=r(90),f=r.n(c),m=r(237),d=r(439),v=r(437),h=r(432),k=r(552),x=r(549),D=r(469),_=r(492),w=r(433),y=r(554),V=r(78),$=r(434),C=r(444),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"11",md:"8"}},[r("v-sheet",{staticClass:"darken-4",attrs:{color:"blue",outlined:"",rounded:""}},[r("v-card",{staticClass:"py-10",attrs:{outlined:""}},[r("v-form",[r("v-row",[r("v-col",{staticClass:"mx-auto",attrs:{cols:"11",md:"8"}},[r("v-card-title",[t._v("編集")]),t._v(" "),r("v-text-field",{attrs:{label:"しおりの名前",counter:"",maxlength:"25"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),r("v-file-input",{attrs:{label:"File input","prepend-icon":"mdi-camera",accept:".png, .jpeg, .jpg"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"7"}},[r("v-select",{attrs:{multiple:"",items:t.prefectures,label:"エリア選択"},model:{value:t.form.selectPref,callback:function(e){t.$set(t.form,"selectPref",e)},expression:"form.selectPref"}})],1)],1),t._v(" "),r("v-row",{staticClass:"align-center",attrs:{dense:""}},[r("v-col",{attrs:{cols:"5"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{label:"初日","prepend-icon":"mdi-calendar",readonly:"","hide-details":"none"},model:{value:t.form.firstDate,callback:function(e){t.$set(t.form,"firstDate",e)},expression:"form.firstDate"}},"v-text-field",o,!1),n))]}}]),model:{value:t.firstDateMenu,callback:function(e){t.firstDateMenu=e},expression:"firstDateMenu"}},[t._v(" "),r("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.form.firstDate,callback:function(e){t.$set(t.form,"firstDate",e)},expression:"form.firstDate"}},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.firstDateMenu=!1}}},[t._v("\n                        Cancel\n                      ")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.form.firstDate)}}},[t._v("\n                        OK\n                      ")])],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"2"}},[r("div",{staticClass:"text-center"},[t._v("～")])]),t._v(" "),r("v-col",{attrs:{cols:"5"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{label:"最終日","prepend-icon":"mdi-calendar",readonly:"","hide-details":"none"},model:{value:t.form.lastDate,callback:function(e){t.$set(t.form,"lastDate",e)},expression:"form.lastDate"}},"v-text-field",o,!1),n))]}}]),model:{value:t.lastDateMenu,callback:function(e){t.lastDateMenu=e},expression:"lastDateMenu"}},[t._v(" "),r("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.form.lastDate,callback:function(e){t.$set(t.form,"lastDate",e)},expression:"form.lastDate"}},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.lastDateMenu=!1}}},[t._v("Cancel")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.form.lastDate)}}},[t._v("OK")])],1)],1)],1)],1),t._v(" "),r("v-row",{staticClass:"justify-end mt-4",attrs:{dense:""}},[r("v-btn",{attrs:{elevation:"0",color:"primary",disabled:t.canSubmit},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v("保存")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{VBtn:m.a,VCard:d.a,VCardTitle:v.c,VCol:h.a,VDatePicker:k.a,VFileInput:x.a,VForm:D.a,VMenu:_.a,VRow:w.a,VSelect:y.a,VSheet:V.a,VSpacer:$.a,VTextField:C.a})}}]);